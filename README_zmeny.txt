Uprava prikladu
==================

Bazální metabolismus a růst hmotnosti jedince
* pridat otazku na dW/dM
* zduraznit, ze u dW/dt se chce dosazeni

Do kazde sady dat neco s desetinnym cislem

* Prozkoumat nutnost commitu ve skriptu, ktery meni data uzivatelu
* Randomizovat příklad s plejtvákem (aplikovana)



Pred upgradem na 2.16 je asi potreba doinstalovat knihovny:
libjson-maybexs-perl libarchive-zip-perl libhttp-async-perl libxml-simple-perl npm


For multiple reasons stemming from many improvements, you need to install
npm on the server if it is not already there. Then go to the htdocs/ folder
and run:
npm install


Po upgradu na verzi 2.16:
------------------------
* nainstalovat patch z produkcni vetve
* site.conf.dist na site.conf, nastavit URL serveru, Mariadb zmenit na mysql,
* site.conf pridat 
   $mail{tls_allowed} = 'starttls';
   $mail{saslUsername} = ' .....  ..... ..... ';
   $mail{saslPassword} = ' .... .... .... ';
* course.conf nastavit
   $achievementExcludeSet = ["00_Uvod","Zkouska_vzor"];
   aby se nezapocitavaly tyto testy.
* v course.conf zmeni extra_css_files na 
   $pg{specialPGEnvironmentVars}{extra_css_files} = ['css/robmar.css'];
* v ulohach cislo 15 pouzit
   ADD_CSS_FILE("css/left.css");  # pridat css/
   a v hw-webwork kopirovat PGessayLivePreviewAce3.pl na PGessayLivePreviewAce.pl   
* local.overrides.dist na local.overrides a zohlednit zmeny
* v local.overrides nastavit
    $webworkFiles{site_info} = "$webworkDirs{htdocs}/mendelu_site_info.txt";
* v local.overrides nastavit
    $permissionLevels{modify_tags} = "nobody";
    aby neotravovaly hlasky o taxnomny, viz
    https://webwork.maa.org/moodle/mod/forum/discuss.php?d=4819
* doinstaloval XML::Simple Perl knihovnu
* nezapomenout sudo patch -p1 -d / < /opt/webwork/webwork2/docker-config/xmlrpc-lite-utf8-fix.patch
* Achievementy podle vetve personal levels_in_preamble a přemigrovat
  do češtiny.  Upravit odměny za achivementy
* Problemy s locale v datumu resi
  https://github.com/openwebwork/webwork2/pull/1333
* Problemy s casovymi zonami na NightOwl&friends resi
  https://github.com/openwebwork/webwork2/pull/1331


Zmeny v site.conf ve verzi 2.15
====================================

$webwork_url = "/webwork2";
$server_root_url = "http://um.mendelu.cz";

$server_userID = "www-data";
$server_groupID = "www-data";
$webwork_server_admin_email ='robert.marik.cz@gmail.com';

$externalPrograms{checkurl} = "lwp-request -d -mHEAD";
$externalPrograms{curlCommand} = "/usr/bin/curl";

$mail{smtpServer} = "smtp.gmail.com";
$mail{smtpSender} = 'akademie.ldf@smtp.gmail.com';
$siteDefaults{timezone} = "Europe/Prague";
$siteDefaults{locale}="cs_CZ";

$database_dsn = "dbi:mysql:webwork:localhost";
#$database_dsn = "dbi:mysql:entrans:mysql.mendelu.cz";

$database_username = "webworkWrite";
$database_password = 'bacha na prozrazeni hesla';
#$database_username = "entrans";
#$database_password = 'bacha na prozrazeni hesla';

Zmeny v local.overrides ve verzi 2.15
====================================

$language = "cs_CZ";
$studentDateDisplayFormat="%A %d %B %Y, %H:%M";

$webworkDirs{htdocs_temp}  =  '/var/www/html/wwtmp';
$webworkURLs{htdocs_temp}   = 'http://um.mendelu.cz:8080/wwtmp';
$webworkDirs{equationCache} = "$webworkDirs{htdocs_temp}/equations";
$webworkURLs{equationCache} = "$webworkURLs{htdocs_temp}/equations";
$courseDirs{html_temp}  =  "/var/www/html/wwtmp/$courseName";
$courseURLs{html_temp}   = "http://um.mendelu.cz:8080/wwtmp/$courseName";
$webworkURLs{MathJax}    = 'http://um.mendelu.cz:8080/webwork2_files/mathjax/MathJax.js?config=TeX-MML-AM_HTMLorMML-full';


simple.conf (na strance konfigurace)
===========

#!perl
# This file is automatically generated by WeBWorK's web-based
# configuration module.  Do not make changes directly to this
# file.  It will be overwritten the next time configuration
# changes are saved.

$defaultTheme = 'math4-green';
$hardcopyTheme = 'oneColumn';
$pg{timeAssignDue} = '11:00pm';
$pg{assignOpenPriorToDue} = 11520;
$pg{answersOpenAfterDueDate} = 60;
$achievementsEnabled = 1;
$achievementPointsPerProblem = 8;
$achievementItemsEnabled = 1;
$pg{options}{enableShowMeAnother} = 1;
$pg{options}{showMeAnotherDefault} = 3;
$pg{options}{showMeAnotherMaxReps} = 10;
$permissionLevels{record_answers_when_acting_as_student} = 'admin';
$pg{displayModes} = ['MathJax'];
$pg{specialPGEnvironmentVars}{entryAssist} = 'MathQuill';
$mail{feedbackSubjectFormat} = 'WeBWorK, predmet %c, uzivatel %u';
$mail{allowedRecipients} = ['robert.marik.cz@gmail.com'];



Obsah course.conf verze 2.15
=============================

$dbLayoutName = 'sql_single';
*dbLayout = $dbLayouts{$dbLayoutName};
$pg{specialPGEnvironmentVars}{PRINT_FILE_NAMES_FOR} = ['admin'];
$pg{specialPGEnvironmentVars}{extra_css_files} = ['robmar.css'];


Obsah report_grades.msg
==========================
Vítej uživateli $LOGIN ($FN $LN). Za úlohy Ti bylo zatím uděleno $COL[-4] bodů (údaj stažený a archivovaný k datu $COL[-1], pokud došlo od té doby ke změnám, projeví se v tomto okénku po automatické noční aktualizaci).  
<b>Uvedenému bodovému zisku odpovídá $COL[-2] bonusových bodů k písemce.</b> (Maximální bodový zisk je 160 bodů. Z toho základu se počítají bonusové body ke zkoušce podle tabulky na webu předmětu.)

Hodně zdaru, hodně zdraví, hodně energie, hodně radostných chvil s matematikou.



Achievementy
============

Je potreba aby se pri testu, zda je sada dokoncena, nezohlednoval priklad s volnou formulaci. Musime udelat achievement s cislem malym a obsahem, ktery vymaze eseje z pole @problemSets.

----------------
## List of problems which will be excluded from the @setProblems
my %essayProblems = (
 '01_Derivace' => {      # set id
 '15' => 1,    # problem number
},
 '02_...' => {      # set id
 '2' => 1,    # problem number
 '15' => 1, 
},
 '2' => {      # set id
 '2' => 1,    # problem number
 '15' => 1, 
},
 '3' => {      # set id
 '3' => 1,    # problem number
 '15' => 1, 
},
 '4' => {      # set id
 '4' => 1,    # problem number
 '15' => 1, 
}
);


my $index_preamble=0;
my @idxsToRemove_preamble=();
foreach (@setProblems)
{
    unshift @idxsToRemove_preamble, $index_preamble if $essayProblems{$_->set_id} && $essayProblems{$_->set_id}{$_->problem_id} ; 
    $index_preamble++;
}

splice @setProblems, $_, 1 for @idxsToRemove_preamble;

return 0;
---------------


# * pridat last_attempt_solves.at  a ctyrlistek. Kontrolovat max_attempts
# * finished set on friday between the lunch and the evening
# * finished set on sunday between the lunch and the evening
# * problem solved on Monday morning


### speed_mather.at a super_speed_math.at nefunguji, cas se nastavi pokazde kdyz se prepnu do teto sady . 

# problemy s locale v datumu resi https://github.com/openwebwork/webwork2/pull/1333
